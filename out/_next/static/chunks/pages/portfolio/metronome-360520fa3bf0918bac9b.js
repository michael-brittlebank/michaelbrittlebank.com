(("undefined"!==typeof self?self:this).webpackChunk_N_E=("undefined"!==typeof self?self:this).webpackChunk_N_E||[]).push([[951],{3349:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},6610:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5991:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:function(){return o}})},6156:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7608:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:function(){return r}})},5255:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,{Z:function(){return o}})},6089:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return i}});var o=n(3349);function i(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?(0,o.Z)(e):t}},8655:function(e){e.exports={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]}},4184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var s=o.apply(null,n);s&&e.push(s)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},3715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(5893),o=n(6610),i=n(5991),s=n(3349),a=n(5255),c=n(6089),u=n(7608),l=n(6156),m=n(7294),d=n(4184),f=n.n(d),h=n(7625),p=n(8655);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var b=function(e){(0,a.Z)(n,e);var t=v(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,s.Z)(r),"myWorker",void 0),(0,l.Z)((0,s.Z)(r),"maxValue",220),(0,l.Z)((0,s.Z)(r),"minValue",40),(0,l.Z)((0,s.Z)(r),"setBpmDebounceTimeout",void 0),(0,l.Z)((0,s.Z)(r),"metronomeTick",void 0),(0,l.Z)((0,s.Z)(r),"metronomeTock",void 0),(0,l.Z)((0,s.Z)(r),"availableSubdivisions",[{label:"Whole Note",value:1},{label:"Half Note",value:2},{label:"Triplet Note",value:3},{label:"Quarter Note",value:4}]),(0,l.Z)((0,s.Z)(r),"longPressInterval",void 0),r.state={isMetronomeStarted:!1,currentBpm:100,metronomeTick:0,currentSubdivision:1,mutedIndicators:[],bpmError:!1},r._start=r._start.bind((0,s.Z)(r)),r._stop=r._stop.bind((0,s.Z)(r)),r._setBpm=r._setBpm.bind((0,s.Z)(r)),r._onMessage=r._onMessage.bind((0,s.Z)(r)),r._setSubdivision=r._setSubdivision.bind((0,s.Z)(r)),r._handleLongPress=r._handleLongPress.bind((0,s.Z)(r)),r._clearLongPressInterval=r._clearLongPressInterval.bind((0,s.Z)(r)),r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.metronomeTick=document.getElementById("metronome-tick"),this.metronomeTock=document.getElementById("metronome-tock"),"serviceWorker"in navigator?navigator.serviceWorker.register("/files/metronome.worker.js").then((function(t){e.myWorker=new Worker(t.active.scriptURL),e.myWorker.onmessage=e._onMessage})).catch((function(e){console.warn("Service worker registration failed",e)})):console.warn("Service worker not supported")}},{key:"componentWillUnmount",value:function(){this.myWorker.terminate()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentBpm,o=t.bpmError,i=t.currentSubdivision,s=t.isMetronomeStarted;return(0,r.jsxs)("section",{id:"metronome-container",className:"col-sm-12 portfolio-item",children:[(0,r.jsx)("h2",{id:"metronome-title",className:"section-header",children:"Metronome"}),(0,r.jsxs)("p",{children:["This metronome (and the larger website) is built with"," ",(0,r.jsx)("a",{href:"https://reactjs.org/",target:"_blank",children:"React"})," ","and JavaScript and employs"," ",(0,r.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",target:"_blank",children:"Web Workers"})," ","and self-correcting timer. The range of recorded variance is \xb12 milliseconds off of true time."]}),(0,r.jsx)("p",{children:'To use the metronome, select your beats per minute using the input box in the top left corner and your note subdivision using the dropdown in the top right. Then press the "Start" button to begin the count. Left click on any subdivision to mute the beat which is indicated by a black icon. Left click again on the black icon to unmute it and remove the black indicator.'}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-sm-12 col-md-6 metronome-controls-container",children:[(0,r.jsx)("p",{children:(0,r.jsx)("label",{htmlFor:"metronome-bpm-input",children:"Beats Per Minute"})}),(0,r.jsx)("button",{onTouchStart:function(){e._handleLongPress(!1)},onTouchEnd:function(){e._clearLongPressInterval(!1)},onMouseDown:function(){e._handleLongPress(!1)},onMouseUp:function(){e._clearLongPressInterval(!1)},onContextMenu:function(e){return e.preventDefault(),!1},className:"small-button",children:"-"}),(0,r.jsx)("input",{id:"metronome-bpm-input",type:"number",value:n||"",onChange:function(t){return e._getBpmFromInput(t)},max:this.maxValue,min:this.minValue,className:f()("input",{error:o})}),(0,r.jsx)("button",{onTouchStart:function(){e._handleLongPress(!0)},onTouchEnd:function(){e._clearLongPressInterval(!0)},onMouseDown:function(){e._handleLongPress(!0)},onMouseUp:function(){e._clearLongPressInterval(!0)},onContextMenu:function(e){return e.preventDefault(),!1},className:"small-button",children:"+"}),o?(0,r.jsx)("p",{className:"error",children:"Please enter a value between 40 and 220"}):null]}),(0,r.jsxs)("div",{className:"col-sm-12 col-md-6 metronome-controls-container",children:[(0,r.jsx)("p",{children:"Subdivision"}),(0,r.jsx)("div",{className:"list-item-selector row",children:this.availableSubdivisions.map((function(t,n){return(0,r.jsx)("a",{className:f()("col-sm-6 list-item",{selected:t.value===i}),onClick:function(){return e._setSubdivision(t)},children:t.label},n)}))})]})]}),(0,r.jsx)("div",{id:"metronome-indicators-container",className:"row",children:this._getMetronomeIndicators()}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-sm-6",children:(0,r.jsx)("button",{onClick:this._start,className:f()("button",{disabled:s||o}),children:"Start"})}),(0,r.jsx)("div",{className:"col-sm-6",children:(0,r.jsx)("button",{onClick:this._stop,className:f()("button",{disabled:!s}),children:"Stop"})})]}),(0,r.jsxs)("a",{href:"https://github.com/mike-stumpf/mikestumpf.com/blob/master/src/pages/portfolio/metronome.js",className:"button",target:"_blank",children:["View Code\xa0\xa0\xa0",(0,r.jsx)(h.G,{icon:p,className:"fa"})]}),(0,r.jsx)("audio",{id:"metronome-tick",src:"/files/tick.mp3",preload:"auto"}),(0,r.jsx)("audio",{id:"metronome-tock",src:"/files/tock.mp3",preload:"auto"})]})}},{key:"_getMetronomeIndicators",value:function(){var e=this,t=this.state,n=t.currentSubdivision,o=t.metronomeTick,i=t.mutedIndicators,s=[];if(1===n)s.push((0,r.jsxs)("div",{className:"metronome-indicator-container",onClick:function(){return e._silenceIndicator(0)},children:[(0,r.jsx)("div",{className:"metronome-indicator opaque"}),(0,r.jsx)("div",{className:f()("metronome-indicator center-absolute",{active:o%2!==0,silent:-1!==i.indexOf(0)}),children:"\xa0"}),(0,r.jsx)("div",{className:f()("metronome-indicator center-absolute",{active:o%2===0,silent:-1!==i.indexOf(0)}),children:"\xa0"}),(0,r.jsx)("span",{className:"metronome-indicator-number",children:"1"})]},0));else for(var a=function(t){s.push((0,r.jsxs)("div",{className:"metronome-indicator-container",onClick:function(){return e._silenceIndicator(t)},children:[(0,r.jsx)("div",{className:f()("metronome-indicator",{active:1===n?o%2===0:o%n===t,silent:-1!==i.indexOf(t)}),children:"\xa0"}),(0,r.jsx)("span",{className:"metronome-indicator-number",children:t+1})]},t))},c=0;c<n;c++)a(c);return s}},{key:"_start",value:function(){this.state.isMetronomeStarted||(this.setState({isMetronomeStarted:!0}),this._postWorkerMessage())}},{key:"_stop",value:function(){this.state.isMetronomeStarted&&(this.setState({isMetronomeStarted:!1}),this._postWorkerMessage(0))}},{key:"_getBpmFromInput",value:function(e){e.target.value.length>0?this._setBpm(parseInt(e.target.value,10)):this._setBpm(void 0)}},{key:"_setBpm",value:function(e){var t=this,n=this.state.isMetronomeStarted,r={};r=e?e>this.maxValue||e<this.minValue?{bpmError:!0,currentBpm:e}:{bpmError:!1,currentBpm:e}:{bpmError:!0,currentBpm:void 0},this.setState(r),clearTimeout(this.setBpmDebounceTimeout),this.setBpmDebounceTimeout=setTimeout((function(){var e=r,o=e.currentBpm,i=e.bpmError;n&&o&&!i&&t._postWorkerMessage()}),500)}},{key:"_onMessage",value:function(e){e.data.tick%this.state.currentSubdivision===0&&-1===this.state.mutedIndicators.indexOf(0)?(this.metronomeTick.currentTime=0,this.metronomeTick.play()):-1===this.state.mutedIndicators.indexOf(e.data.tick%this.state.currentSubdivision)&&(this.metronomeTock.currentTime=0,this.metronomeTock.play()),this.setState({metronomeTick:parseInt(e.data.tick,10)})}},{key:"_setSubdivision",value:function(e){var t=e.value;this.state.isMetronomeStarted&&this.state.currentBpm&&this._postWorkerMessage(void 0,t),this.setState({currentSubdivision:t})}},{key:"_postWorkerMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentBpm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.currentSubdivision;this.myWorker.postMessage({bpm:e,subdivision:t})}},{key:"_silenceIndicator",value:function(e){var t=this.state.mutedIndicators,n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),this.setState({mutedIndicators:t})}},{key:"_handleLongPress",value:function(e){var t=this;e?this.longPressInterval||(this.longPressInterval=setInterval((function(){t._setBpm(t.state.currentBpm+1)}),200)):this.longPressInterval||(this.longPressInterval=setInterval((function(){t._setBpm(t.state.currentBpm-1)}),200))}},{key:"_clearLongPressInterval",value:function(e){clearInterval(this.longPressInterval),this.longPressInterval=void 0,e?this._setBpm(this.state.currentBpm+1):this._setBpm(this.state.currentBpm-1)}}]),n}(m.Component)},2227:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolio/metronome",function(){return n(3715)}])}},function(e){e.O(0,[774,497],(function(){return t=2227,e(e.s=t);var t}));var t=e.O();_N_E=t}]);